潮汕天气网
======
## 简介
潮汕天气网是一个使用ThinkPHP框架搭建的区域性天气网站，主要功能包括预警信息、天气新闻、天气实况和预报、天气资料查询等，本应用功能复杂，用到大量API，所以对于初学者来说是一个比较大的挑战。由于开发初期经验不足，没有做好规划，所以错误使用的TP框架，这是一个不明智的选择，后期如有空余时间，我会把整个网站进行重构，敬请期待。
***
### 作者：小K
### 邮箱：keven@xiaok.site
***
## 开发模式
使用thinkphp框架（下称tp）开发，采用MVC模式，M为“模型”，V为“视图”，C为“控制器”。同时，本站采用前后台双应用模式，分别为HOME和ADMIN两个总模块，把用户和管理员界面分离。
## 文件命名前缀
### HOME：用户模块
### ADMIN：管理员模块
### 功能命名：(大小写根据实际情况改变）
功能 | 命名
--- | ---
预警 | warn
头条 | topnews
新闻 | news
城市页 | city
实况 | weather
预报 | fore
台风 | typh
地震 | earthquake
环境 | envir
## 数据库结构
### 库设计习惯
数据表名依据表用途以英文相符单词命名，各关键单词首字母大写，如：opinion（网页基本设置）、news（新闻列表）
所有视图表一律以"view_"开头标识
表格除opinion等公共用表外一般按照各功能模块设计
### 所有表格
#### admin(管理员信息表)
字段名 | 类型 | 备注
--- | --- | ---
id | 主键自增 | -
user | 字符串 | 管理员登录用户名
password | 字符串 | 管理员登录密码
email | 字符串 | 管理员邮箱
loginday | date | 上次登录日期
logintime | time | 上次登录时间
#### cat(菜单表)
字段名 | 类型 | 备注
--- | --- | ---
lid | 主键自增 | -
name | 字符串 | 菜单名称
url | 字符串 | 菜单链接
pid | 整型 | 菜单级别
#### cityid(城市信息)
字段名 | 类型 | 备注
--- | --- | ---
id | 主键自增 | -
cityid | 整型 | 城市在通用天气网中的id
longitude | 字符串 | 城市经度
latitude | 字符串 | 城市纬度
city | 字符串 | 城市英文名
zh | 字符串 | 城市中文名简称
zhall | 字符串 | 城市中文名全称
#### cityarea(城市区域列表)
字段名 | 类型 | 备注
--- | --- | ---
id | 主键自增 | -
city | 字符串 | 区域所属城市
name | 字符串 | 区域名称
#### comment(新闻评论列表)
字段名 | 类型 | 备注
--- | --- | ---
id | - | -
user | 整型 | 用户id
content | 文本 | 评论内容
date | datetime | 评论时间
pid | 整型 | 文章id
#### content(全站公共内容)
字段名 | 类型 | 备注
--- | --- | ---
id | - | -
name | 字符串 | 公告名称
content | 文本 | 公告内容
#### news(新闻列表)
字段名 | 类型 | 备注
--- | --- | ---
id | - | -
cid | 整型 | 分类id
title | 字符串 | 文章标题
text | 文本 | 文章内容
date | date | 文章更新时间
come | 字符串 | 文章来源
url | 字符串 | 文章来源地址
#### opinion(网站基本设置)
字段名 | 类型 | 备注
--- | --- | ---
id | - | -
name | 字符串 | 设置名称
value | 字符串 | 设置内容
#### user(用户信息列表)
字段名 | 类型 | 备注
--- | --- | ---
id | 主键自增 | -
user | 字符串 | 管理员登录用户名
password | 字符串 | 管理员登录密码
email | 字符串 | 管理员邮箱
loginday | date | 上次登录日期
logintime | time | 上次登录时间
#### warn(预警列表)
字段名 | 类型 | 备注
--- | --- | ---
id | 主键自增 | -
city | 字符串 | 预警城市
type | 字符串 | 预警类型
leaves | 字符串 | 预警级别
color | 字符串 | 预警信号颜色
text | 文本 | 预警文案
now | NOW、PASS | 预警状态
date | date | 发布日期
time | time | 发布时间
passdate | datetime | 撤销时间